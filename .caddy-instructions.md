# üéâ Caddy HTTPS Setup - Instrucciones R√°pidas

## ‚úÖ Cambios Realizados

Se ha agregado **Caddy** como reverse proxy con SSL autom√°tico. Todos los servicios ahora est√°n disponibles via HTTPS.

## üîê Nuevas URLs

| Antes | Ahora |
|-------|-------|
| http://localhost:3000 | https://app.localhost |
| http://localhost:8000 | https://api.localhost |
| http://localhost:8055 | https://cms.localhost |

## üöÄ C√≥mo Iniciar

```bash
# 1. Reconstruir los servicios (primera vez)
make test-all

# 2. Acceder a los servicios
# - Frontend: https://app.localhost
# - API Docs: https://api.localhost/api/docs
# - Directus: https://cms.localhost
```

## ‚ö†Ô∏è Importante

1. **Primera vez**: Tu navegador mostrar√° una advertencia de certificado SSL. Esto es **normal** en desarrollo local. Haz clic en "Avanzado" ‚Üí "Continuar" para aceptar el certificado.

2. **Siempre usa HTTPS**: Para evitar problemas de CORS y cookies, siempre accede via las URLs HTTPS (*.localhost), no via localhost:puerto.

3. **Scripts externos**: Si ejecutas scripts desde tu m√°quina (como `seed_directus.py`), configura las variables de entorno:
   ```bash
   DIRECTUS_URL=https://cms.localhost API_URL=https://api.localhost python3 scripts/seed_directus.py
   ```

## üìÅ Archivos Modificados

- ‚úÖ `Caddyfile` - Configuraci√≥n del reverse proxy (NUEVO)
- ‚úÖ `docker-compose.yml` - Agregado servicio Caddy + variables HTTPS
- ‚úÖ `Makefile` - URLs actualizadas a HTTPS
- ‚úÖ `README.md` - Documentaci√≥n actualizada
- ‚úÖ `HTTPS_SETUP.md` - Gu√≠a detallada (NUEVO)
- ‚úÖ `DOCKER_STRATEGY.md` - Actualizado con Caddy

## üîß Comandos √ötiles

```bash
# Ver logs de Caddy
make logs-caddy

# Ver todos los logs
make logs

# Reiniciar Caddy
docker compose restart caddy

# Ver estado de servicios
make status

# Detener todo
make test-stop
```

## üìñ Documentaci√≥n Completa

Para m√°s detalles, consulta [HTTPS_SETUP.md](HTTPS_SETUP.md)

## üêõ Problemas Comunes

### "Cannot connect to site"
```bash
# Verifica que los servicios est√©n corriendo
make status
docker compose ps
```

### "CORS errors"
- Aseg√∫rate de usar HTTPS (https://app.localhost, NO http://localhost:3000)

### "Session not persisting in Directus"
- Accede via https://cms.localhost (NO http://localhost:8055)
- Las cookies seguras solo funcionan con HTTPS

---

**Listo para usar! üéâ** Ejecuta `make test-all` y accede a https://app.localhost
